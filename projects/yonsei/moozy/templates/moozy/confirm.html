{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>확인</title>
  <link rel="stylesheet" href="{% static 'moozy/confirm.css' %}">
</head>
<body>
  <div class="phone">

<div class="status-bar">
  <div class="status-left" id="clock">00:00</div>
  <div class="status-right">
    <span class="icon-signal"></span>
    <span class="icon-wifi"></span>
    <span class="icon-battery">
      <span class="battery-fill" id="battery-fill"></span>
    </span>
  </div>
</div>
      <div class="emotion-back" onclick="history.back()">
          <svg class="back-icon" viewBox="0 0 24 24">
              <path d="M15 6 L9 12 L15 18" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/>
          </svg>
      </div>

      <h2 class="emotion-title">{{ user.username|default:"○○○" }}님의 오늘 하루 무드를 <br>이렇게 꾸밀까요?</h2>
      {% if emotion == "슬픔" %}
          <img src="{% static 'moozy/img/sad.png' %}" class="emotion-img">
      {% elif emotion == "기쁨" %}
          <img src="{% static 'moozy/img/happy.png' %}" class="emotion-img">
      {% elif emotion == "짜증" %}
          <img src="{% static 'moozy/img/angry.png' %}" class="emotion-img">
      {% elif emotion == "흥분" %}
          <img src="{% static 'moozy/img/excited.png' %}" class="emotion-img">
      {% elif emotion == "피곤" %}
          <img src="{% static 'moozy/img/tired.png' %}" class="emotion-img">
      {% elif emotion == "당황" %}
          <img src="{% static 'moozy/img/surprised.png' %}" class="emotion-img">
      {% endif %}
      <div class="note-box">
          {{ note }}
      </div>

      <div class="btn-area">
        <form method="GET" action="{% url 'moozy:write_note' %}">
            <button class="btn edit-btn">수정</button>
        </form>
        <form method="POST" action="{% url 'moozy:success' %}">
            {% csrf_token %}
            <button class="btn save-btn">저장할게요</button>
        </form>
      </div>
    </div>
  </div>
<!-- ✅ 시계 & 배터리 작동 스크립트 -->
<script>
  // 시계 표시
  function updateClock() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    document.getElementById('clock').textContent = `${hours}:${minutes}`;
  }
  setInterval(updateClock, 1000);
  updateClock();

  // 배터리 표시
  navigator.getBattery?.().then(function(battery) {
    function updateBatteryLevel() {
      const level = battery.level * 100;
      document.getElementById('battery-fill').style.width = `${level}%`;
    }
    updateBatteryLevel();
    battery.addEventListener('levelchange', updateBatteryLevel);
  });
</script>
</body>
